---
layout: default
title: /createMessage
---

<h1>/createMessage</h1>

<p>
    <b style="font-weight: bold;">Remote API Guide link</b> 
    <br/>
    <a href="http://www.pushwoosh.com/programming-push-notification/pushwoosh-push-notification-remote-api/#PushserviceAPI-Method-messages-create"
       target="_blank">
        Method /createMessage
    </a>
</p>
<p>
    <b style="font-weight: bold;">Signature</b>
    <br/>
    <code>CreateMessageResponse createMessage(CreateMessageRequest $createMessageRequest)</code>
</p>

<h2>CreateMessageRequest class</h2>

<p>
    <b style="font-weight: bold;">Full name</b>
    <br/>
    <code>Gomoob\Pushwoosh\Model\Request\CreateMessageRequest</code>
</p>
<p>
    The <code>CreateMessageRequest</code> class is principally used to define a list of <code>Notification</code> 
    objects where each object defines a Pushwoosh push notification to send to a set of devices.
</p>
<p>
    You can manipulate the <code>Notification</code> objects linked to a <code>CreateMessageRequest</code> object by 
    using the <code>addNotification($notification)</code>, <code>getNotifications()</code> and 
    <code>setNotifications()</code> methods.
</p>
{% highlight php %}
<?php
use Gomoob\Pushwoosh\Model\Notification\Notification;
use Gomoob\Pushwoosh\Model\Request\CreateMessageRequest;

// Adding notifications using the 'addNotification($notification)' method
$request0 = CreateMessageRequest::create()
    ->addNotification(Notification::create()->setContent('Hello'))
    ->addNotification(Notification::create()->setContent('World'))
    ->addNotification(Notification::create()->setContent('!'));

// Adding notifications using the 'setNotifications($notifications)' method
$request1 = CreateMessageRequest::create()->setNotifications(
    array(
        Notification::create()->setContent('Hello'),
        Notification::create()->setContent('World'),
        Notification::create()->setContent('!'),
    )
); 

// Call the '/createMessage' Web Service
$pushwoosh->createMessage($request0);
$pushwoosh->createMessage($request1);

?>
{% endhighlight %}

<h3>Notification class</h3>

<p>
    <b style="font-weight: bold;">Full name</b>
    <br/>
    <code>Gomoob\Pushwoosh\Model\Notification\Notification</code>
</p>
<p>
    The <code>Notification</code> class allow to describe the content of a Push Notification to be sent to one or 
    multiple devices. 
</p>

<h4>General settings</h4>

<br/>

<!-- 'conditions' -->
<p>
	<code style="font-weight: bold;">
	    conditions
	</code>
	<br/>
	<font style="font-weight: bold">Methods</font>
	<br/>
	<code>addCondition($condition)</code>, <code>getConditions()</code>, <code>setConditions($conditions)</code>
	<br/>
	<font style="font-weight: bold">Sample</font>
	{% highlight php %}
<?php
// Setting conditions with the 'addCondition' method
$notification = Notification::create()
    ->addCondition(StringCondition::create('stringCondition')->eq('toto'));
    ->addCondition(IntCondition::create('intCondition')->lte(15));
    ->addCondition(ListCondition::create('listCondition')->in(array('value 1', 'value 2', 'value 3')));

// Setting conditions with the 'setConditions' method
$notification = Notification::create()->setConditions(
    array(
        StringCondition::create('stringCondition')->eq('toto'),
        IntCondition::create('intCondition')->lte(15),
        ListCondition::create('listCondition')->in(array('value 1', 'value 2', 'value 3')));
    )
);
?>
	{% endhighlight %}
</p>

<!-- 'content -->
<p>
    <code style="font-weight: bold;">content</code>
    <br/>
    <font style="font-weight: bold">Methods</font>
    <br/>
    <code>getContent()</code>, <code>setContent($content)</code>
    <br/>
    <font style="font-weight: bold">Sample</font>
    {% highlight php %}
<?php
// Setting the same content for all languages
$notification = Notification::create()->setContent('Hello World !');

// Setting different contents depending on the language
$notification = Notification::create()
    ->setContent(
        array(
            'fr' => 'Bonjour !',
            'en' => 'Hello !',
            'es' => 'Buenos Dias !'
        )
    );
?>
    {% endhighlight %}
</p>

<!-- 'data' -->
<p>
    <code style="font-weight: bold;">data</code>
    <br/>
    <font style="font-weight: bold">Methods</font>
    <br/>
    <code>getData()</code>, <code>setData($data)</code>
    <br/>
    <font style="font-weight: bold">Sample</font>
    {% highlight php %}
<?php
$notification = Notification::create()->setData(
    array(
        'data_parameter_1' => 'data_parameter_1_value',
        'data_parameter_2', 'data_parameter_2_value'
    )
);
?>
    {% endhighlight %}
</p>

<p>
    <code style="font-weight: bold;">devices</code>
    <br/>
    <font style="font-weight: bold">Methods</font>
    <br/>
    <code>addDevice($device)</code>, <code>getDevices()</code>, <code>setDevices($devices)</code>
    <br/>
    <font style="font-weight: bold">Sample</font>
    {% highlight php %}
<?php
// Setting devices with the 'addDevice' method
$notification = Notification::create()
    ->addDevice('Device 0')
    ->addDevice('Device 1')
    ->addDevice('Device 2');

// Setting devices with the 'setDevices' method
$notification = Notification::create()
    ->setDevices(
        array(
            'Device 0',
            'Device 1',
            'Device 2'
        )
    );
?>
    {% endhighlight %}
</p>

<p>
    <code style="font-weight: bold;">filter</code>
    <br/>
    <font style="font-weight: bold">Methods</font>
    <br/>
    <code>getFilter()</code>, <code>setFilter($filter)</code>
    <br/>
    <font style="font-weight: bold">Sample</font>
    {% highlight php %}
<?php
$notification = Notification::create()->setFilter('FILTER_NAME');
?>
    {% endhighlight %}
</p>

<p>
    <code style="font-weight: bold;">ignoreUserTimezone</code>
    <br/>
    <font style="font-weight: bold">Methods</font>
    <br/>
    <code>isIgnoreUserTimezone()</code>, <code>setIgnoreUserTimezone($ignoreUserTimezone)</code>
    <br/>
    <font style="font-weight: bold">Sample</font>
    {% highlight php %}
<?php
Notification::create()->setIgnoreUserTimezone(false);
?>
    {% endhighlight %}
</p>

<p>
    <code style="font-weight: bold;">link</code>
    <br/>
    <font style="font-weight: bold">Methods</font>
    <br/>
    <code>getLink()</code>, <code>setLink($link)</code>
    <br/>
    <font style="font-weight: bold">Sample</font>
    {% highlight php %}
<?php
Notification::create()->setLink('http://www.gomoob.com');
?>
    {% endhighlight %}
</p>

<p>
    <code style="font-weight: bold;">minimizeLink</code>
    <br/>
    <font style="font-weight: bold">Methods</font>
    <br/>
    <code>getMinimizeLink()</code>, <code>setMinimizeLink($minimizeLink)</code>
    <br/>
    <font style="font-weight: bold">Sample</font>
    {% highlight php %}
<?php
// No minimization
Notification::create()->setMinimizeLink(MinimizeLink::none());

// Google minimization
Notification::create()->setMinimizeLink(MinimizeLink::google());

// Bitly minimization
Notification::create()->setMinimizeLink(MinimizeLink::bitly());

// Baidu (china) minimization
Notification::create()->setMinimizeLink(MinimizeLink::baiduChina());
?>
    {% endhighlight %}
</p>

<p>
    <code style="font-weight: bold;">pageId</code>
    <br/>
    <font style="font-weight: bold">Methods</font>
    <br/>
    <code>getPageId()</code>, <code>setPageId($pageId)</code>
    <br/>
    <font style="font-weight: bold">Sample</font>
    {% highlight php %}
<?php
Notification::create()->setPageId(39);
?>
    {% endhighlight %}
</p>

<p>
    <code style="font-weight: bold;">platforms</code>
    <br/>
    <font style="font-weight: bold">Methods</font>
    <br/>
    <code>addPlatform($platform)</code>, <code>getPlatforms()</code>, <code>setPlatforms($platforms)</code>
    <br/>
    <font style="font-weight: bold">Sample</font>
    {% highlight php %}
<?php
// Setting platforms with the 'addPlatform' function
Notification::create()
    ->addPlatform(Platform::ios())
    ->addPlatform(Platform::android())
    ->addPlatform(Platform::blackBerry());

// Setting platforms with the 'setPlatforms' function
Notification::create()->setPlatforms(
    array(
        Platform::ios(),
        Platform::android(),
        Platform::blackBerry()
    )
)
?>
    {% endhighlight %}
</p>

<p>
    <code style="font-weight: bold;">sendDate</code>
    <br/>
    <font style="font-weight: bold">Methods</font>
    <br/>
    <code>getSendDate()</code>, <code>setSendDate($sendDate)</code>
    <br/>
    <font style="font-weight: bold">Sample</font>
    {% highlight php %}
<?php
// Set a specific date
Notification::create()->setSendDate($dateTime);

// Or simply set 'now'
Notification::create()->setSendDate('now');
?>
    {% endhighlight %}
</p>

<h4>Specific platform settings</h4>

<p>
    In addition to generic notification settings it's possible to specify specific settings depending on the platform where 
    the Push notifications are sent.
</p>
<p>
    Each specific platform setting is defined using an additional setting object, the classes used to create those 
    settings objects are described in the following sections.
</p>

<h5>Amazon Device Messaging</h5>

<p>
    <b style="font-weight: bold;">Class name</b>
    <br/>
    <code>Gomoob\Pushwoosh\Model\Notification\ADM</code>
</p>
<p>
    <b style="font-weight: bold;">Sample</b>
    <br/>
    {% highlight php %}
<?php
Notification::create()->setADM(
    ADM::create()->setBanner($banner)
                 ->setCustomIcon($customIcon)
                 ->setHeader($header)
                 ->setIcon($icon)
                 ->setRootParams($rootParams)
                 ->setSound($sound)
                 ->setTtl($ttl)
);
?>
    {% endhighlight %}
</p>

<h5>Android</h5>

<p>
    <b style="font-weight: bold;">Class name</b>
    <br/>
    <code>Gomoob\Pushwoosh\Model\Notification\Android</code>
</p>
<p>
    <b style="font-weight: bold;">Sample</b>
    <br/>
    {% highlight php %}
<?php
Notification::create()->setAndroid(
    Android::create()->setBadges($badges)
                 ->setBanner($banner)
                 ->setCustomIcon($customIcon)
                 ->setGcmTtl(3600)
                 ->setHeader($header)
                 ->setIbc($ibc)
                 ->setIcon($icon)
                 ->setLed($led)
                 ->setPriority($priority)
                 ->setRootParams($rootParams)
                 ->setSound($sound)
                 ->setVibration($vibration)
);
?>
    {% endhighlight %}
</p>

<h5>BlackBerry</h5>

<p>
    <b style="font-weight: bold;">Class name</b>
    <br/>
    <code>Gomoob\Pushwoosh\Model\Notification\BlackBerry</code>
</p>

<p>
    <b style="font-weight: bold;">Sample</b>
    <br/>
    {% highlight php %}
<?php
Notification::create()->setBackBerry(
    BlackBerry::create()->setHeader($header)
);
?>
    {% endhighlight %}
</p>

<h5>iOS</h5>

<p>
    <b style="font-weight: bold;">Class name</b>
    <br/>
    <code>Gomoob\Pushwoosh\Model\Notification\IOS</code>
</p>
<p>
    <b style="font-weight: bold;">Sample</b>
    <br/>
    {% highlight php %}
<?php
Notification::create()->setIOS(
    IOS::create()->setAps($apsr)
                 ->setApnsTrimContent($apnsTrimContent)
                 ->setBadges($badges)
                 ->setContentAvailable($contentAvailable)
                 ->setRootParams($rootParams)
                 ->setSound($sound)
                 ->setTtl($ttl)
);
?>
    {% endhighlight %}
</p>

<h5>Mac OS X</h5>

<p>
    <b style="font-weight: bold;">Class name</b>
    <br/>
    <code>Gomoob\Pushwoosh\Model\Notification\Mac</code>
</p>
<p>
    <b style="font-weight: bold;">Sample</b>
    <br/>
    {% highlight php %}
<?php
Notification::create()->setMac(
    Mac::create()->setBadges($badges)
                 ->setRootParams($rootParams)
                 ->setSound($sound)
                 ->setTtl($ttl)
);
?>
    {% endhighlight %}
</p>

<h5>Safari</h5>

<p>
    <b style="font-weight: bold;">Class name</b>
    <br/>
    <code>Gomoob\Pushwoosh\Model\Notification\Safari</code>
</p>
<p>
    <b style="font-weight: bold;">Sample</b>
    <br/>
    {% highlight php %}
<?php
Notification::create()->setSafari(
    Safari::create()->setAction($action)
                    ->setTitle($title)
                    ->setTtl($ttl)
                    ->setUrl($url)
);
?>
    {% endhighlight %}
</p>

<h5>Windows Notification Service</h5>

<p>
    <b style="font-weight: bold;">Class name</b>
    <br/>
    <code>Gomoob\Pushwoosh\Model\Notification\WNS</code>
</p>
<p>
    <b style="font-weight: bold;">Sample</b>
    <br/>
    {% highlight php %}
<?php
Notification::create()->setWNS(
    WNS::create()->setContent($content)
                 ->setTag($tag)
                 ->setType($type)
);
?>
    {% endhighlight %}
</p>

<h5>Windows Phone</h5>

<p>
    <b style="font-weight: bold;">Class name</b>
    <br/>
    <code>Gomoob\Pushwoosh\Model\Notification\WP</code>
</p>
<p>
    <b style="font-weight: bold;">Sample</b>
    <br/>
    {% highlight php %}
<?php
Notification::create()->setWP(
    WP::create()->setBackbackground($backbackgroud)
                ->setBackground($background)
                ->setBacktitle($backtitle)
                ->setCount($count)
                ->setType($type)
);
?>
    {% endhighlight %}
</p>

<h5>Chrome</h5>

<p>
    <b style="font-weight: bold;">Class name</b>
    <br/>
    <code>Gomoob\Pushwoosh\Model\Notification\Chrome</code>
</p>
<p>
    <b style="font-weight: bold;">Sample</b>
    <br/>
    {% highlight php %}
<?php
Notification::create()->setChrome(
    Chrome::create()->setGcmTtl($gcmTtl)
                ->setIcon($icon)
                ->setTitle($title)
);
?>
    {% endhighlight %}
</p>

<h2><code>CreateMessageResponse</code> class</h2>
